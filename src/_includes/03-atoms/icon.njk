{# 
=========================
      ICON ATOM          
      v1.1 - Charlotte + SVG Loader      
=========================
#}

{% macro renderIcon(option) %}
  {# Check if datas is provided #}
  {% if not option.datas %}
    <span class="text-red-500">Error: No icon configuration provided</span>
  {% else %}
    {# Retrieve icon configuration #}
    {% set iconsConfig = option.datas %}
    {% set iconName = option.name %}
    
    {# Find the specific icon by name - iconsConfig is already the array #}
    {% set iconData = null %}
    {% for icon in iconsConfig %}
      {% if icon.name == iconName %}
        {% set iconData = icon %}
      {% endif %}
    {% endfor %}

    {# Fallback if icon not found #}
    {% if not iconData %}
      <span class="text-red-500">Icon not found: {{ iconName }}</span>
    {% else %}
      {# Build CSS classes - Using base + variant classes from input.css #}
      {% set variant = iconData.variant | default('interface') %}
      {% set cssClasses = 'icon-' ~ variant %}
      
      {# Add any additional classes #}
      {% if option.class %}
        {% set cssClasses = cssClasses ~ ' ' ~ option.class %}
      {% endif %}
      
      {# Use SVG loader for inline SVG with color inheritance #}
      <span 
        data-svg-src="{{ iconData.path }}"
        class="{{ cssClasses }}"
        aria-label="{{ iconData.alt }}"
      ></span>
    {% endif %}
  {% endif %}
{% endmacro %}

{# 
============================
Summon HAT Components Wisely
============================

1. Import the macro at the top of your page
{% from "03-atoms/icon.njk" import renderIcon %}

2. Call a specific icon by its name (will load as inline SVG)
{{ renderIcon({ 
    name: "skills_treasure",
    datas: atoms.icon.icons
}) }}

3. Add custom classes if needed
{{ renderIcon({ 
    name: "social_linkedin",
    datas: atoms.icon.icons,
    class: "hover:opacity-75"
}) }}

Note: Requires svg-loader.js to be loaded for color inheritance to work.
May your SVGs inherit colors like true champions! ðŸŽ¨âœ¨
#}