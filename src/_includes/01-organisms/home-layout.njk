{# ===========================================================
   @ORGANISMS - HOME-LAYOUT
   - Main page layout orchestrating avatar, skills and tab-sections
   - Manages positioning and responsive behavior across 4 breakpoints
   - Each layout is self-contained to prevent cross-contamination
=========================================================== #}

{# Import organisms #}
{% from "01-organisms/avatar-card.njk" import renderAvatarCard %}
{% from "01-organisms/skills-card.njk" import renderSkillsCard %}
{% from "01-organisms/tab-sections.njk" import renderTabSections %}

{% macro renderHomeLayout(option) %}
  {# Check if required data is provided #}
  {% if not option.avatar_datas or not option.skills_datas or not option.tab_sections_datas %}
    <span class="text-red-500">Error: Missing required configuration data</span>
  {% else %}

    {# Home Layout Container - Parent for all breakpoints #}
    <div class="home-layout w-full" data-component="home-layout">

      {# ===================================================================
         SM LAYOUT - Mobile First (640px and below) ✅ VALIDÉ
         Structure: Avatar → Skills → Tab-sections (skills hidden by default)
         =================================================================== #}
      <div class="home-layout__sm block sm:hidden min-h-0 h-auto" data-breakpoint="sm">

        {# Avatar Section #}
        <div class="home-layout__avatar mb-4 h-auto pt-8">
          {{ renderAvatarCard({ 
            name: option.avatar_name or "charlotte_main",
            datas: option.avatar_datas,
            image_datas: option.image_datas,
            typography_datas: option.typography_datas,
            button_datas: option.button_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>

        {# Skills Cards - Now directly after avatar for better UX flow #}
        <div class="home-layout__skills h-auto min-h-0 mb-4">
          {{ renderSkillsCard({ 
            name: "languages_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}

          {{ renderSkillsCard({ 
            name: "hard_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}

          {{ renderSkillsCard({ 
            name: "soft_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}

          {{ renderSkillsCard({ 
            name: "interests_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>

        {# Tab Sections - Pushed down naturally when skills appear #}
        <div class="home-layout__tabs h-auto pb-8">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </div>

      </div>

      {# ===================================================================
         MD LAYOUT - Tablet (640px to 1023px) ✅ VALIDÉ - CSS INLINE SUPPRIMÉ
         Structure: Avatar → Tab-sections → Skills (toujours visible)
         =================================================================== #}
      <div class="home-layout__md hidden sm:block lg:hidden min-h-0 h-auto" data-breakpoint="md">

        {# Avatar Section #}
        <div class="home-layout__avatar mb-4 h-auto pt-8">
          {{ renderAvatarCard({ 
            name: option.avatar_name or "charlotte_main",
            datas: option.avatar_datas,
            image_datas: option.image_datas,
            typography_datas: option.typography_datas,
            button_datas: option.button_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>

        {# Tab Sections #}
        <div class="home-layout__tabs h-auto mb-4 w-full">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </div>

        {# Skills Cards - Toujours visible avec wrapper complet #}
        <div class="home-layout__skills h-auto min-h-0 pb-8">
          <div class="skills-wrapper">
            {{ renderSkillsCard({ 
              name: "hard_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}

            {{ renderSkillsCard({ 
              name: "soft_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}

            {{ renderSkillsCard({ 
              name: "languages_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}

            {{ renderSkillsCard({ 
              name: "interests_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
        </div>

      </div>

      {# ===================================================================
   LG LAYOUT - Desktop Large (1024px to 1279px)
   Structure: Skills avec Avatar superposé + Tab-sections en dessous
   =================================================================== #}
      <div class="home-layout__lg hidden lg:block xl:hidden min-h-0 h-auto" data-breakpoint="lg">

        {# Bloc principal - Skills + Avatar superposé #}
        <div class="home-layout__top relative flex justify-center items-center h-auto pt-8 pb-4">

          {# Skills Cards Container - Zone centrale qui recevra l'avatar par dessus #}
          <div class="home-layout__skills relative">
            <div class="skills-wrapper">
              {{ renderSkillsCard({ 
          name: "languages_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}

              {{ renderSkillsCard({ 
          name: "soft_skills_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}

              {{ renderSkillsCard({ 
          name: "hard_skills_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}

              {{ renderSkillsCard({ 
          name: "interests_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
            </div>
          </div>

          {# Avatar Card - Superposé au centre du bloc skills - AJUSTÉ #}
          <div class="home-layout__avatar absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[45.5%] z-10 pointer-events-none">
            {{ renderAvatarCard({ 
        name: option.avatar_name or "charlotte_name",
        datas: option.avatar_datas,
        image_datas: option.image_datas,
        typography_datas: option.typography_datas,
        button_datas: option.button_datas,
        tooltip_datas: option.tooltip_datas
      }) }}
          </div>

        </div>

        {# Bloc secondaire - Tab Sections #}
        <div class="home-layout__tabs h-auto pb-8">
          <div class="lg-tab-sections-wrapper">
            {{ renderTabSections({ 
        name: option.tab_sections_name or "charlotte_main",
        datas: option.tab_sections_datas,
        tabMenuDatas: option.tab_menu_datas,
        linkDatas: option.link_datas,
        portfolioDatas: option.portfolio_datas,
        timelineDatas: option.timeline_datas,
        contactDatas: option.contact_datas,
        typographyDatas: option.typography_datas,
        contentBlockDatas: option.content_block_datas,
        contactBlockDatas: option.contact_block_datas,
        listFormDatas: option.list_form_datas,
        progressBarDatas: option.progress_bar_datas,
        imageDatas: option.image_datas,
        iconDatas: option.icon_datas,
        radioDatas: option.radio_datas,
        inputDatas: option.input_datas,
        buttonDatas: option.button_datas
      }) }}
          </div>
        </div>

      </div>

{# ===================================================================
         XL LAYOUT - Large Desktop (1280px and above) ✅ CORRIGÉ
         Structure: Flexbox 2 colonnes - Tab-sections (30%) + Skills/Avatar (70%)
         =================================================================== #}
      <div class="home-layout__xl hidden xl:flex xl:w-full xl:gap-8 xl:h-fit xl:max-h-[800px] xl:py-8 xl:justify-center" data-breakpoint="xl">

        {# Tab-sections (30%) - Prend 30% de l'espace disponible #}
        <div class="home-layout__tabs xl:w-fit xl:flex-shrink-0 xl:min-w-0 xl:max-h-[800px] xl:overflow-hidden">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </div>

        {# Bloc principal - Skills + Avatar superposé - COPIE EXACTE DU LG #}
        <div class="home-layout__top relative flex justify-center items-center h-auto pb-4">

          {# Skills Cards Container - Zone centrale qui recevra l'avatar par dessus #}
          <div class="home-layout__skills relative">
            <div class="skills-wrapper">
              {{ renderSkillsCard({ 
          name: "languages_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}

              {{ renderSkillsCard({ 
          name: "soft_skills_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}

              {{ renderSkillsCard({ 
          name: "hard_skills_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}

              {{ renderSkillsCard({ 
          name: "interests_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
            </div>
          </div>

          {# Avatar Card - Superposé au centre du bloc skills - AJUSTÉ #}
          <div class="home-layout__avatar absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[47.7%] z-10 pointer-events-none">
            {{ renderAvatarCard({ 
        name: option.avatar_name or "charlotte_name",
        datas: option.avatar_datas,
        image_datas: option.image_datas,
        typography_datas: option.typography_datas,
        button_datas: option.button_datas,
        tooltip_datas: option.tooltip_datas
      }) }}
          </div>

        </div>

      </div>

    </div>

  {% endif %}
{% endmacro %}