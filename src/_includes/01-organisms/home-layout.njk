{# ===========================================================
   @ORGANISMS - HOME-LAYOUT
   - Main page layout orchestrating avatar, skills and tab-sections
   - Manages positioning and responsive behavior across 4 breakpoints
   - Each layout is self-contained to prevent cross-contamination
=========================================================== #}

{# Import organisms #}
{% from "01-organisms/avatar-card.njk" import renderAvatarCard %}
{% from "01-organisms/skills-card.njk" import renderSkillsCard %}
{% from "01-organisms/tab-sections.njk" import renderTabSections %}

{% macro renderHomeLayout(option) %}
  {# Check if required data is provided #}
  {% if not option.avatar_datas or not option.skills_datas or not option.tab_sections_datas %}
    <span class="text-red-500">Error: Missing required configuration data</span>
  {% else %}
    
    {# Home Layout Container - Parent for all breakpoints #}
    <div class="home-layout w-full" data-component="home-layout">
      
      {# ===================================================================
         SM LAYOUT - Mobile First (640px and below) âœ… VALIDÃ‰
         Structure: Avatar â†’ Skills â†’ Tab-sections (skills hidden by default)
         =================================================================== #}
      <div class="home-layout__sm block sm:hidden min-h-0 h-auto" data-breakpoint="sm">
        
        {# Avatar Section #}
        <div class="home-layout__avatar mb-4 h-auto pt-8">
          {{ renderAvatarCard({ 
            name: option.avatar_name or "charlotte_main",
            datas: option.avatar_datas,
            image_datas: option.image_datas,
            typography_datas: option.typography_datas,
            button_datas: option.button_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
        
        {# Skills Cards - Now directly after avatar for better UX flow #}
        <div class="home-layout__skills h-auto min-h-0 mb-4">
          {{ renderSkillsCard({ 
            name: "languages_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
          
          {{ renderSkillsCard({ 
            name: "hard_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
          
          {{ renderSkillsCard({ 
            name: "soft_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
          
          {{ renderSkillsCard({ 
            name: "interests_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
        
        {# Tab Sections - Pushed down naturally when skills appear #}
        <div class="home-layout__tabs h-auto pb-8">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </div>
        
      </div>
      
      {# ===================================================================
         MD LAYOUT - Tablet (640px to 1023px) âœ… VALIDÃ‰ - CSS INLINE SUPPRIMÃ‰
         Structure: Avatar â†’ Tab-sections â†’ Skills (toujours visible)
         =================================================================== #}
      <div class="home-layout__md hidden sm:block lg:hidden min-h-0 h-auto" data-breakpoint="md">
        
        {# Avatar Section #}
        <div class="home-layout__avatar mb-4 h-auto pt-8">
          {{ renderAvatarCard({ 
            name: option.avatar_name or "charlotte_main",
            datas: option.avatar_datas,
            image_datas: option.image_datas,
            typography_datas: option.typography_datas,
            button_datas: option.button_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
        
        {# Tab Sections - CSS inline supprimÃ©, JavaScript prend le contrÃ´le #}
        <div class="home-layout__tabs h-auto mb-4 w-full">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </div>
        
        {# Skills Cards - Toujours visible avec wrapper complet #}
        <div class="home-layout__skills h-auto min-h-0 pb-8">
          <div class="skills-wrapper">
            {{ renderSkillsCard({ 
              name: "hard_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
            
            {{ renderSkillsCard({ 
              name: "soft_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
            
            {{ renderSkillsCard({ 
              name: "languages_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
            
            {{ renderSkillsCard({ 
              name: "interests_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
        </div>
        
      </div>
      
      {# ===================================================================
         LG LAYOUT - Desktop (1024px to 1279px) ðŸš§ TODO
         Structure: TBD - Side by side layout ?
         =================================================================== #}
      <div class="home-layout__lg hidden lg:block xl:hidden min-h-0 h-auto" data-breakpoint="lg">
        {# TODO: LG Layout implementation #}
        <div class="home-layout__placeholder text-center p-8">
          <p class="text-lg">LG Layout - Coming Soon</p>
          <p class="text-sm text-gray-500">1024px to 1279px</p>
        </div>
      </div>
      
      {# ===================================================================
         XL LAYOUT - Large Desktop (1280px and above) ðŸš§ TODO
         Structure: TBD - Full layout with all components ?
         =================================================================== #}
      <div class="home-layout__xl hidden xl:block min-h-0 h-auto" data-breakpoint="xl">
        {# TODO: XL Layout implementation #}
        <div class="home-layout__placeholder text-center p-8">
          <p class="text-lg">XL Layout - Coming Soon</p>
          <p class="text-sm text-gray-500">1280px and above</p>
        </div>
      </div>
      
    </div>
    
  {% endif %}
{% endmacro %}