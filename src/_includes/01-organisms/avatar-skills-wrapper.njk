{# ===========================================================
   @ORGANISMS - AVATAR-SKILLS-WRAPPER
   - Manages avatar/skills layout and interactions
=========================================================== #}

{# Import organisms #}
{% from "01-organisms/avatar-card.njk" import renderAvatarCard %}
{% from "01-organisms/skills-card.njk" import renderSkillsCard %}

{% macro renderAvatarSkillsWrapper(option) %}
  {# Check if required data is provided #}
  {% if not option.avatar_datas or not option.skills_datas %}
    <span class="text-red-500">Error: Missing avatar or skills configuration</span>
  {% else %}
    
    {# Desktop version #}
    <div class="avatar-skills-wrapper hidden lg:block lg:relative lg:grid lg:grid-cols-2 lg:gap-2 lg:max-w-4xl lg:mx-auto lg:p-2" data-component="avatar-skills-wrapper-desktop">
      
      {# Avatar Card - Absolute center position #}
      <div class="avatar-skills-avatar lg:absolute lg:top-[53.9%] lg:left-1/2 lg:transform lg:-translate-x-1/2 lg:-translate-y-1/2 lg:z-10 lg:pointer-events-none">
        {{ renderAvatarCard({ 
          name: option.avatar_name or "charlotte_main",
          datas: option.avatar_datas,
          image_datas: option.image_datas,
          typography_datas: option.typography_datas,
          button_datas: option.button_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
      {# Left column - Skills Cards #}
      <div class="lg:flex lg:flex-col lg:gap-1 lg:items-center">
        <div id="skills-card-languages" class="skills-card-container">
          {{ renderSkillsCard({ 
            name: "languages_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
        
        <div id="skills-card-soft-skills" class="skills-card-container">
          {{ renderSkillsCard({ 
            name: "soft_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
      </div>
      
      {# Right column - Skills Cards #}
      <div class="lg:flex lg:flex-col lg:gap-1 lg:items-center">
        <div id="skills-card-hard-skills" class="skills-card-container">
          {{ renderSkillsCard({ 
            name: "hard_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
        
        <div id="skills-card-interests" class="skills-card-container">
          {{ renderSkillsCard({ 
            name: "interests_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </div>
      </div>
      
    </div>
    
    {# Tablet version #}
    <div class="avatar-skills-wrapper hidden sm:block lg:hidden flex flex-col gap-4 max-w-3xl mx-auto p-4" data-component="avatar-skills-wrapper-tablet">
      
      <div class="avatar-skills-avatar flex justify-center mb-4">
        {{ renderAvatarCard({ 
          name: option.avatar_name or "charlotte_main",
          datas: option.avatar_datas,
          image_datas: option.image_datas,
          typography_datas: option.typography_datas,
          button_datas: option.button_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
      <div class="flex gap-2 justify-center">
        <div class="flex flex-col gap-0">
          <div id="skills-card-languages-tablet" class="skills-card-container w-fit h-fit">
            {{ renderSkillsCard({ 
              name: "languages_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
          
          <div id="skills-card-soft-skills-tablet" class="skills-card-container w-fit h-fit">
            {{ renderSkillsCard({ 
              name: "soft_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
        </div>
        
        <div class="flex flex-col gap-0">
          <div id="skills-card-hard-skills-tablet" class="skills-card-container w-fit h-fit">
            {{ renderSkillsCard({ 
              name: "hard_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
          
          <div id="skills-card-interests-tablet" class="skills-card-container w-fit h-fit">
            {{ renderSkillsCard({ 
              name: "interests_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
        </div>
      </div>
      
    </div>
    
    {# Mobile version - Interactive skills cards #}
    <div class="avatar-skills-wrapper block sm:hidden flex flex-col gap-4 max-w-sm mx-auto p-4" data-component="avatar-skills-wrapper-mobile">
      
      <div class="avatar-skills-avatar flex justify-center">
        {{ renderAvatarCard({ 
          name: option.avatar_name or "charlotte_main",
          datas: option.avatar_datas,
          image_datas: option.image_datas,
          typography_datas: option.typography_datas,
          button_datas: option.button_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
      {# Skills cards mobile - CACHÉES par défaut #}
      <div id="skills-card-languages-mobile" class="skills-card-container hidden w-full mb-4">
        {{ renderSkillsCard({ 
          name: "languages_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
      <div id="skills-card-hard-skills-mobile" class="skills-card-container hidden w-full mb-4">
        {{ renderSkillsCard({ 
          name: "hard_skills_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
      <div id="skills-card-soft-skills-mobile" class="skills-card-container hidden w-full mb-4">
        {{ renderSkillsCard({ 
          name: "soft_skills_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
      <div id="skills-card-interests-mobile" class="skills-card-container hidden w-full mb-4">
        {{ renderSkillsCard({ 
          name: "interests_card",
          datas: option.skills_datas,
          typography_datas: option.typography_datas,
          caption_datas: option.caption_datas,
          icon_datas: option.icon_datas,
          tooltip_datas: option.tooltip_datas
        }) }}
      </div>
      
    </div>
    
  {% endif %}
{% endmacro %}

{# ===========================================================
   Summon HAT Components Wisely
-----------------------------------------------------------
{{ renderAvatarSkillsWrapper({ 
    avatar_name: "charlotte_main",
    avatar_datas: organisms["avatar-card"]["avatar-cards"],
    skills_datas: organisms["skills-card"]["skills-cards"],
    image_datas: atoms.image.images,
    typography_datas: atoms.typography.texts,
    button_datas: atoms.button.buttons,
    tooltip_datas: atoms.tooltip.tooltips,
    caption_datas: molecules.caption.captions,
    icon_datas: atoms.icon.icons
}) }}
=========================================================== #}