{#
=========================
      SECTION ABOUT        
=========================
#}

{% from "03-atoms/heading.njk" import renderHeading %}
{% from "03-atoms/link.njk" import renderLink %}
{% from "03-atoms/icon.njk" import renderIcon %}
{% from "03-atoms/button.njk" import renderButton %}
{% from "01-organisms/carousel.njk" import renderCarousel %}

{% macro renderSectionAbout(options) %}
  {% if options.datas %}
    {% set globalStyle = options.datas.globalStyle %}
    {% set sectionStyles = options.datas.sectionStyles %}
    
    {% set sectionData = null %}
    {% if options.name %}
      {% for section in options.datas.sections %}
        {% if section.name == options.name %}
          {% set sectionData = section %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if not sectionData %}
      {% set sectionData = options.datas.sections[0] %}
    {% endif %}
    
    {% set variant = options.datas.variants[sectionData.variant] | default(options.datas.variants.default) %}
    
    <section class="{{ globalStyle }} {{ variant }} {{ options.class | default('') }} pb-12" data-section-about="{{ sectionData.name }}">
      {# Titre principal (bande en haut) avec centrage vertical #}
      {% if sectionData.mainTitle and options.headings %}
        <div class="{{ sectionStyles.mainTitleWrapper }}">
          {{ renderHeading({
            name: sectionData.mainTitle,
            datas: options.headings,
            class: sectionStyles.mainTitleStyle
          }) }}
          
          {# Flèche de défilement (si configurée) #}
          {% if sectionData.scrollArrowIcon and options.icons %}
            <div class="{{ sectionStyles.scrollArrowWrapper }}">
              {{ renderIcon({
                name: sectionData.scrollArrowIcon,
                datas: options.icons,
                class: "rounded-full bg-white"
              }) }}
            </div>
          {% endif %}
        </div>
      {% endif %}
      
      <div class="{{ sectionStyles.container }}">
        {% if sectionData.topTitle %}
          <div class="{{ sectionStyles.topTitleWrapper }}">
            <h1 class="{{ sectionStyles.topTitleStyle }}">{{ sectionData.topTitle }}</h1>
          </div>
        {% endif %}
        
        {# Mobile layout (flex column) #}
        <div class="md:hidden">
          {# Super Heading (section title with underscore) #}
          {% if sectionData.superHeading and options.headings %}
            {{ renderHeading({
              name: sectionData.superHeading,
              datas: options.headings,
              class: "mb-6 mt-8 ma-nautic-section-title"
            }) }}
          {% endif %}
          
          {# Main Heading (title) #}
          {% if sectionData.heading and options.headings %}
            {{ renderHeading({
              name: sectionData.heading,
              datas: options.headings
            }) }}
          {% endif %}
          
          {# Icon if present #}
          {% if sectionData.hasIcon and sectionData.iconName and options.icons %}
            <div class="{{ sectionStyles.iconWrapper }}">
              {{ renderIcon({
                name: sectionData.iconName,
                datas: options.icons,
                class: sectionStyles.iconMobile
              }) }}
            </div>
          {% endif %}
          
          {# Content #}
          {% if sectionData.content %}
            <div class="{{ sectionStyles.contentContainer }}">
              {{ sectionData.content | safe }}
            </div>
          {% endif %}
          
          {# Primary Button (Contact) #}
          {% if sectionData.primaryButton and options.buttons %}
            <div class="{{ sectionStyles.buttonWrapper }}">
              {{ renderButton({
                name: sectionData.primaryButton,
                datas: options.buttons
              }) }}
            </div>
          {% endif %}
          
          {# Primary Link (Contact) #}
          {% if sectionData.primaryLink and options.links %}
            <div class="{{ sectionStyles.buttonWrapper }}">
              {{ renderLink({
                name: sectionData.primaryLink,
                datas: options.links
              }) }}
            </div>
          {% endif %}
          
          {# Carousel pour mobile - Utilisation du composant carousel #}
          {% if sectionData.hasCarousel and sectionData.carouselImages %}
            <div class="{{ sectionStyles.carouselWrapper }}">
              {{ renderCarousel({
                name: sectionData.name + "_carousel",
                customImages: sectionData.carouselImages,
                datas: options.carousels,
                buttons: options.buttons,
                class: "ma-nautic-carousel"
              }) }}
            </div>
          {% endif %}
        </div>
        
        {# Desktop layout (two columns) #}
        <div class="hidden md:flex {{ sectionStyles.contentWrapper }}">
          {# Left column: Super Heading, Main Heading, Icon, Content and Button #}
          <div class="{{ sectionStyles.textContent }}">
            {# Super Heading (section title with underscore) #}
            {% if sectionData.superHeading and options.headings %}
              {{ renderHeading({
                name: sectionData.superHeading,
                datas: options.headings,
                class: "mb-6 mt-8 ma-nautic-section-title"
              }) }}
            {% endif %}
            
            {# Main Heading (title) #}
            {% if sectionData.heading and options.headings %}
              {{ renderHeading({
                name: sectionData.heading,
                datas: options.headings
              }) }}
            {% endif %}
            
            {# Icon if present #}
            {% if sectionData.hasIcon and sectionData.iconName and options.icons %}
              <div class="{{ sectionStyles.iconWrapper }}">
                {{ renderIcon({
                  name: sectionData.iconName,
                  datas: options.icons,
                  class: sectionStyles.iconDesktop
                }) }}
              </div>
            {% endif %}
            
            {# Content #}
            {% if sectionData.content %}
              <div class="{{ sectionStyles.contentContainerDesktop }}">
                {{ sectionData.content | safe }}
              </div>
            {% endif %}
            
            {# Primary Button (Contact) #}
            {% if sectionData.primaryButton and options.buttons %}
              <div class="{{ sectionStyles.buttonWrapper }}">
                {{ renderButton({
                  name: sectionData.primaryButton,
                  datas: options.buttons
                }) }}
              </div>
            {% endif %}
            
            {# Primary Link (Contact) #}
            {% if sectionData.primaryLink and options.links %}
              <div class="{{ sectionStyles.buttonWrapper }}">
                {{ renderLink({
                  name: sectionData.primaryLink,
                  datas: options.links
                }) }}
              </div>
            {% endif %}
          </div>
          
          {# Right column: Carousel - Utilisation du composant carousel #}
          <div class="{{ sectionStyles.mediaContent }}">
            {% if sectionData.hasCarousel and sectionData.carouselImages %}
              <div class="{{ sectionStyles.carouselWrapper }}">
                {{ renderCarousel({
                  name: sectionData.name + "_carousel",
                  customImages: sectionData.carouselImages,
                  datas: options.carousels,
                  buttons: options.buttons,
                  class: "ma-nautic-carousel"
                }) }}
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </section>
  {% else %}
    <span class="text-red-500">Section About data not found</span>
  {% endif %}
{% endmacro %}


{#
============================
Summon MA-NAUTIC Components Wisely
============================

1. Import the macro at the top of your page
{% from "01-organisms/section-about.njk" import renderSectionAbout %}

2. Call the component with the required data
{{ renderSectionAbout({ 
    name: "ma_nautic_about", 
    datas: organisms["section-abouts"], 
    headings: atoms.headings, 
    links: atoms.links,
    icons: atoms.icons,
    carousels: organisms.carousels,
    buttons: atoms.buttons
}) }}

3. Using custom styles
{{ renderSectionAbout({ 
    name: "ma_nautic_about", 
    datas: organisms["section-abouts"], 
    headings: atoms.headings, 
    links: atoms.links,
    icons: atoms.icons,
    carousels: organisms.carousels,
    buttons: atoms.buttons,
    class: "my-custom-section-class" 
}) }}
#}